<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Conversor SRT - Áudio Único</title>

<style>
body{
  background:#000;
  color:#fff;
  font-family:Arial;
  padding:30px;
}
textarea{
  width:100%;
  height:220px;
  background:#111;
  color:#fff;
  padding:10px;
}
button{
  background:red;
  color:white;
  padding:12px;
  border:none;
  cursor:pointer;
  margin-top:10px;
  font-size:15px;
}
#resultadoBox{
  margin-top:20px;
}
pre{
  background:#111;
  padding:15px;
  white-space:pre-wrap;
}
.botoes{
  display:flex;
  gap:10px;
}
</style>
</head>

<body>

<h2>Conversor SRT - Áudio Único</h2>

<p>Cole TODO o roteiro abaixo:</p>

<textarea id="texto" placeholder="Cole seu roteiro aqui..."></textarea>

<button onclick="gerar()">GERAR SRT</button>

<div id="resultadoBox" style="display:none;">

<h3>Resultado (.srt):</h3>

<div class="botoes">
  <button onclick="copiar()">Copiar texto</button>
  <button onclick="baixar()">Baixar .srt</button>
</div>

<pre id="resultado"></pre>

</div>

<script>

function gerar(){

  let texto = document.getElementById("texto").value.trim();

  if(texto.length < 5){
    alert("Cole um texto primeiro!");
    return;
  }

  let duracao = calcularTempo(texto);

  let srt = "";

  srt += "1\n";
  srt += "00:00:00,000 --> " + formatar(duracao) + "\n";
  srt += texto + "\n";

  document.getElementById("resultado").textContent = srt;
  document.getElementById("resultadoBox").style.display = "block";
}

function copiar(){
  let texto = document.getElementById("resultado").textContent;
  navigator.clipboard.writeText(texto);
  alert("Texto copiado!");
}

function baixar(){
  let texto = document.getElementById("resultado").textContent;

  let blob = new Blob([texto], {type:"text/plain"});
  let link = document.createElement("a");

  link.href = URL.createObjectURL(blob);
  link.download = "legenda.srt";
  link.click();
}

function calcularTempo(texto){
  let velocidade = 14; // caracteres por segundo (voz natural)
  let segundos = texto.length / velocidade;
  return Math.ceil(segundos);
}

function formatar(s){

 let h = String(Math.floor(s/3600)).padStart(2,"0");
 let m = String(Math.floor(s%3600/60)).padStart(2,"0");
 let sec = String(s%60).padStart(2,"0");

 return `${h}:${m}:${sec},000`;
}

</script>

</body>
</html>
