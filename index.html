<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Conversor SRT Profissional</title>

<style>
body{
font-family:Arial;
background:#0f172a;
color:#fff;
padding:30px;
max-width:900px;
margin:auto;
}

textarea{
width:100%;
height:260px;
padding:15px;
border-radius:8px;
font-size:15px;
}

button{
background:#22c55e;
color:#000;
border:none;
padding:12px 25px;
border-radius:8px;
font-size:15px;
cursor:pointer;
margin:10px 5px 0 0;
}

pre{
background:#020617;
padding:15px;
white-space:pre-wrap;
border-radius:8px;
margin-top:20px;
}

.footer{
text-align:center;
margin-top:40px;
opacity:0.6;
}
</style>
</head>

<body>

<h2>Conversor de Texto para SRT (CapCut)</h2>

<textarea id="texto" placeholder="Cole seu roteiro aqui..."></textarea>
<br>
<button onclick="gerarSRT()">GERAR SRT</button>

<h3>Resultado (.srt)</h3>

<button onclick="copiar()">Copiar texto</button>
<button onclick="baixar()">Baixar .srt</button>

<pre id="resultado"></pre>

<div class="footer">
Desenvolvido por Farley Ramalho
</div>

<script>
let srtFinal="";

function gerarSRT(){

let texto = document.getElementById("texto").value
.replace(/\s+/g," ")
.trim();

let frases = texto.match(/[^.!?…"]+["”]?([.!?…"]+)?/g);

let blocos=[];
let atual="";

for(let f of frases){

if((atual+f).length<=450){
atual+=f+" ";
}else{
blocos.push(atual.trim());
atual=f+" ";
}
}

if(atual.trim()!=""){
blocos.push(atual.trim());
}

let tempoInicio=0;

let duracao=32; // tempo de leitura
let pausa=10;   // espaço entre áudios

let srt="";
let i=1;

for(let b of blocos){

let inicio=formatarTempo(tempoInicio);
let fim=formatarTempo(tempoInicio+duracao);

srt+=`${i}\n${inicio} --> ${fim}\n${b}\n\n`;

tempoInicio+=duracao+pausa;
i++;
}

srtFinal=srt;
document.getElementById("resultado").textContent=srt;
}

function formatarTempo(seg){
let h=Math.floor(seg/3600);
let m=Math.floor((seg%3600)/60);
let s=Math.floor(seg%60);

return `${pad(h)}:${pad(m)}:${pad(s)},000`;
}

function pad(n){
return n<10?"0"+n:n;
}

function copiar(){
navigator.clipboard.writeText(srtFinal);
alert("SRT copiado!");
}

function baixar(){
let blob = new Blob([srtFinal], {type:"text/plain"});
let link = document.createElement("a");
link.href = URL.createObjectURL(blob);
link.download = "legendas.srt";
link.click();
}
</script>

</body>
</html>
